---
title: 位运算
typora-root-url: 位运算
category: 算法
tags: [算法, 位运算]
date: 2025-12-26 18:27:40
---

## 技巧

### `x &= (x - 1)`

> 把 `x` 的二进制表示中「最右侧的一个 1」变成 0

每执行一次，就会 **消掉一个 1**。

#### 为什么它能做到这一点？

```text
x = 3  -> 二进制 11
x-1=2 -> 二进制 10

11 & 10 = 10
```

结果是 `2`，可以看到 **最低位的 1 被消掉了**。

#### 从二进制规律理解 `x - 1`

假设 `x` 的二进制形式为：

```text
xxxx1000...000
```

（最右边的 `1` 后面全是 `0`）

那么：

```text
x - 1 = xxxx0111...111
```

变化规则：

- 最右边的 `1` → `0`
- 其右侧的所有 `0` → `1`
- 更高位不变

再进行按位与 `x & (x - 1)`：

```text
x:     xxxx1000...000
x-1:   xxxx0111...111
-------------------
结果:  xxxx0000...000
```

只有最右侧的那个 `1` 被清除，其它高位完全不受影响

#### 边界情况说明

- `x = 0`

  - `0 & (-1) = 0`
  - 一般需要额外判断 `x > 0`

- 对负数（补码）同样成立，但实际使用中多用于 **非负整数**
